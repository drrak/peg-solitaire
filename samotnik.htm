<!DOCTYPE html>
<html lang="pl"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Samotnik | Poznaj świat informatyki mattomatti.com</title>
	<meta charset="UTF-8">
	<meta content="Mateusz Dański" name="author">
	<meta content="© Matto Matti 2016" name="copyright">
</head>
<body style="background:#EEE">
<div style="width:800px; margin: 0 auto;background:#FFF; padding:16px">
<style>
.fel{position:absolute;height:92px;width:92px}
.fbl{fill:gray}
.fbl:hover{stroke:black}
.fcirc:hover{stroke:blue}
.fsel{stroke:yellow}
#gwin{display:table;position:absolute;top:0;left:0;width:428px;height:428px;z-index:30;background:rgba(0,0,0,0.75);text-align:center;font-size:20px;color:#FFFFFF;}
#gstatus{max-width:642px;min-width:248px;text-align:center;border:4px solid #552200;margin: 0 auto}
#gboard{position:relative;background:#552200;width:650px;height:650px;margin: 0 auto}
</style>
<div style="margin:4px"><div id="gboard"></div><div id="gstatus">Oczekiwanie na rozpoczęcie rozgrywki</div></div>
</div>
<script>
var ids, elements;

function getElement(posy, posx){
	return '<svg class="fel" style="top:' + (4 + posy*92) +  'px;left:' + (4 + posx*92) + 'px" xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 27.999195 27.999199"><g transform="translate(-60.286 -52.648)"><circle id="el'+posx+"x"+posy+'" class="fcirc" onclick="el_click(this)"  cx="74.286" cy="66.648" r="10.954" fill="#c77037" stroke="#9f5a2b" stroke-width="2.091" stroke-linecap="round" stroke-linejoin="bevel"/></g></svg>';
}

function newGame(){
	var board = document.getElementById("gboard");
	var s = "";
	for(var x = 2; x < 5; x++){
		for(var y = 0; y < 2; y++){
			s += getElement(y, x);
		}
	}
	for(var x = 0; x < 7; x++){
		for(var y = 2; y < 5; y++){
			s += getElement(y, x);
		}
	}
	for(var x = 2; x < 5; x++){
		for(var y = 5; y < 7; y++){
			s += getElement(y, x);
		}
	}
	board.innerHTML = s.replace('el3x3" class="fcirc', 'el3x3" class="fbl');
	showMsg("Oczekiwanie na rozpoczęcie rozgrywki");
	elements = 32;
	ids = "";
}

function el_click(el){
	if(el.className.baseVal == "fcirc"){
		if(ids!="")
			ids.className.baseVal="fcirc";
		ids = el;
		ids.className.baseVal="fsel";
		showMsg("Wybrano pionek");
	} else if (el.className.baseVal == "fbl" && ids != "") {
		var posr = document.getElementById(getPosBetween(ids.id, el.id));
		if(checkDist(ids.id, el.id) && posr.className.baseVal == "fcirc"){
			ids.className.baseVal="fbl";
			el.className.baseVal="fcirc";
			posr.className.baseVal="fbl";
			ids = "";
			showMsg("Wykonano ruch");
			elements--;
		} else {
			showMsg("Nieprawidłowy ruch!");
		}
	} else if (el.className.baseVal == "fbl"  && ids == ""){
		showMsg("Nie można wybrać pustego pola!");
	}
	if(elements == 1){
		showMsg("Zagadka rozwiązana!");
	}
}

function checkDist (str1, str2){
	var pos1 = getPos(str1);
	var pos2 = getPos(str2);
	return ((Math.abs(pos1[0] - pos2[0]) == 2 && pos1[1] == pos2[1]) || (Math.abs(pos1[1] - pos2[1]) == 2 && pos1[0] == pos2[0]))
}

function getPosBetween (str1, str2){
	var pos1 = getPos(str1);
	var pos2 = getPos(str2);
	return "el" + ((parseInt(pos1[0]) + parseInt(pos2[0])) / 2) + "x" + ((parseInt(pos1[1]) + parseInt(pos2[1])) / 2);
}

function getPos (str){
	return str.replace("el", "").split("x");
}

function showMsg (msg) {
	document.getElementById("gstatus").innerHTML = msg;
}
newGame();
</script>
</div>
</body></html>